<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Login</title>
    <style>
        /* body { font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; text-align: center; } */
        h1, h2, h3 { font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; text-align: center; }
        /* h2 { font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; text-align: center; } */
        form { margin-top: 50px; text-align: center; }
        input { margin: 10px; padding: 5px; font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; text-align: center; }
        
        img { position: center; margin-left: 700px; }
        /* time { font-size: 100%; font-weight: normal; font: inherit; font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; vertical-align: baseline; } */
        class.text-2xl { font-size: 200%; font-weight: normal; font: inherit; font-family: "Trebuchet MS", Arial, Helvetica, sans-serif; vertical-align: baseline; }
        
    </style>
    <!-- <script src="https://cdn.tailwindcss.com"></script> -->
    
</head>
<body>
    


    <table id="date-time"></table>
    <tr>
        <td><b id="current-date"; ></b> </td>
        <td>;</td>
        <td><b id="time" class="text-2xl";></b> </td>
    </tr>
</table>

    <!-- <p id="current-date";></p> 
    <p id="time" class="text-2xl";></p>  -->
    <img src="udus.logo.jpg" />
    <h2 >SCHOOL OF BASIC AND ADVANCED STUDIES </h2>
    <h3>2023/2024 Academic Session Results</h3>
    <div id="loadingMessage">Loading student data...</div>
    <form id="loginForm" style="display:none;">
        <input type="text" id="username" placeholder="Username" required><br>
        <input type="password" id="password" placeholder="Password" required><br>
        <input type="submit" value="Login">
    </form>
      

    

    <div id="resultDisplay" style="display:none;">
        <div id="averageScore" style="display: none;"></div>
        <h2> <div id="welcomeMessage" class="mt-4 hidden" style="color:red";></div></h2>
         
        
        <h3>Your Results are as Follows:</h3>
        <table id="resultsTable" border="1" style="margin: 0 auto;">
            <tr>
                <th>Subject</th>
                <th>Score</th>
            </tr>
        </table>
        <center>
        <p>Total Score (500): <span id="totalScore"></span></p>
        <!-- <p>Average Score: <span id="averageScore"></span></p> -->
        <p>Aggregate Score (400): <span id="aggregateScore"></span></p>
        <p>Remarks: <span id="remarks"></span></p>
        
        <a href="#" id="logoutLink">Logout</a>
    </center>
    </div>
    <marquee><h3><span class="orange" style="color:rgb(221, 135, 222)";> For enquiries, please send a mail to aminubala@gmail.com! Thank you </span></h3></marquee>
<!--     <script src="script.js"></script> -->
    <script>
    let studentData = [];
  async function login() {
            document.getElementById('loginForm').addEventListener('submit', function(e) {
    e.preventDefault();
    const username = document.getElementById('username').value;
    const password = document.getElementById('password').value;
    
            
            try {
                const response = await fetch('https://raw.githubusercontent.com/aminubalayabo/aminubalayabo.github.io/main/SOBAS/students_results.txt');
                const data = await response.text();
                const lines = data.split('\n');
                
                for (let line of lines) {
                    const [user, pass, ...scores] = line.split(',');
                    if (user === username && pass === password) {
                        displayResults(user, scores);
                        return;
                    }
                }
                
                alert('Invalid username or password');
            } catch (error) {
                console.error('Error:', error);
                alert('Invalid username or password');
            }
        }




    
            

    const student = studentData.find(s => s.username === username && s.password === password);

    if (student) {
        displayResults(student.scores);
    } else {
        alert('Invalid username or password');
    }
});


  
            const loginForm = document.getElementById('loginForm');  
            const welcomeMessage = document.getElementById('welcomeMessage');  

            loginForm.addEventListener('submit', function(event) {  
                event.preventDefault();  
                const username = document.getElementById('username').value;  
                localStorage.setItem('username', username);  
                displayWelcomeMessage();  
            });  


            
            function displayWelcomeMessage() {  
                const username = localStorage.getItem('username');  
                if (username) {  
                    welcomeMessage.textContent = `Welcome, ${username}!`;  
                    welcomeMessage.classList.remove('hidden');  
                }  
            }  

            // Display welcome message if user is already logged in  
            displayWelcomeMessage();  
        
            
            

          
            function updateTime() {  
                const now = new Date();  
                const options = { hour: '2-digit', minute: '2-digit', second: '2-digit' };  
                document.getElementById('time').textContent = now.toLocaleTimeString(undefined, options);  
            }  
            setInterval(updateTime, 1000);  
            window.onload = updateTime;  
          



function displayResults(scores) {
    document.getElementById('loginForm').style.display = 'none';
    document.getElementById('resultDisplay').style.display = 'block';

    const table = document.getElementById('resultsTable');
    table.innerHTML = '<tr><th>Subject</th><th>Score</th></tr>'; // Clear previous results
    let totalScore = 0;

    for (const [subject, score] of Object.entries(scores)) {
        const row = table.insertRow();
        row.insertCell(0).textContent = subject;
        row.insertCell(1).textContent = score;
        totalScore += score;
    }

    const averageScore = totalScore / Object.keys(scores).length;
    const aggregateScore = Math.round(totalScore / 500*400);
    if (aggregateScore > 159) {
        remarks = "Pass Matric";
        } else {
        remarks = "Fail Matric!"
        } 
    document.getElementById('totalScore').textContent = totalScore;
    document.getElementById('averageScore').textContent = averageScore.toFixed(2);
    document.getElementById('aggregateScore').textContent = aggregateScore.toFixed(3);
    document.getElementById('remarks').textContent = remarks;
}

    document.getElementById('logoutLink').addEventListener('click', function(e) {
    e.preventDefault();
    document.getElementById('loginForm').style.display = 'block';
    document.getElementById('resultDisplay').style.display = 'none';
    document.getElementById('username').value = '';
    document.getElementById('password').value = '';
});
<script/>
    <script>  
        // Function to display current date  
        function displayDate() {  
            const dateElement = document.getElementById('current-date');  
            const today = new Date();  
            dateElement.innerHTML = today.toLocaleDateString('en-US', {  
                year: 'numeric',  
                month: 'long',  
                day: 'numeric'  
            }); // Formats the date as "Month Day, Year"  
        }  
        
        // Call the function to display the date when the page loads  
        window.onload = function() {  
            displayDate();  
            
        };  
    </script>  
</body>
</html>
